import requests
from bs4 import BeautifulSoup
import json
import pymysql

conn = pymysql.connect(host="localhost", port=3306, user="root", passwd="root",
                       db="db_movie"),  # #获取一个游标对象,cursor=conn.cursor()

headers = {
    'User-Agent':
        'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36',
    'Cookie': '__mta=47051416.1713928393702.1713960454195.1713960456199.110; __mta=47051416.1713928393702.1713960456199.1713970455013.111; uuid_n_v=v1; uuid=91ED195001E811EFA3C20DA673AEB1D0C59848C4486D49A0ACD70B9182A77D4E; _lxsdk_cuid=18f0e17c0d5c8-07fda687c21411-26001d51-240000-18f0e17c0d5c8; _csrf=219e32f492f211c9cdc9af589b1cc902b55114c0176f9a952ee877edcd15bf1b; Hm_lvt_703e94591e87be68cc8da0da7cbd0be2=1713928392,1713953611,1713958444; _lx_utm=utm_source%3Dbing%26utm_medium%3Dorganic; WEBDFPID=x4v2w340xx435872z4x5685w6y53702681u891ww6zx97958xy8657yv-2029329681402-1713969680898WQEMWMCfd79fef3d01d5e9aadc18ccd4d0c95073635; token=AgGwIOAXYNeDiM7gPJ6TBpH5HKeaX_vsbBZ1bFKQcFkIyRMBi8YetOeLIbozqT9igP5qjfd8oMN_aQAAAAC0HwAA2yahvKGfEs9BBDI46B2S8aKRoz-5Gxc4qOZLljFEFUbFEeLsGJZRTXPNdsAVTggP; uid=720635605; uid.sig=XX5gSxlFzygvDigC-YJE30gIT_c; _lxsdk=91ED195001E811EFA3C20DA673AEB1D0C59848C4486D49A0ACD70B9182A77D4E; __mta=47051416.1713928393702.1713969215535.1713969947953.124; Hm_lpvt_703e94591e87be68cc8da0da7cbd0be2=1713970455; _lxsdk_s=18f1072b02e-efd-8b4-582%7C%7C47'
}

movie_list = [1165777, 1198578, 1220935, 1221474, 1228248, 1250661, 1251242, 1259816, 1285828, 1290415, 1291017,
              1298240, 1298495, 1298556, 1299156, 1299355, 1301249, 1301552, 1302431, 1307114, 1309779, 1310023,
              1310520, 1320548, 1328836, 1336423, 1339006, 1340084, 1350281, 1351778, 1355287, 1357867, 1362705,
              1370725, 1371004, 1371016, 1372970, 1374577, 1374909, 1379047, 1383679, 1385816, 1385822, 1394072,
              1395127, 1399450, 1405602, 1413549, 1413550, 1418942, 1419080, 1422798, 1423910, 1424182, 1426142,
              1427828, 1427883, 1427961, 1431842, 1432552, 1432921, 1434029, 1434971, 1434993, 1435067, 1437173,
              1441786, 1446251, 1446323, 1448767, 1448919, 1451499, 1456267, 1458719, 1459024, 1461152, 1461184,
              1461216, 1461250, 1461260, 1462635, 1462637, 1466262, 1469175, 1469785, 1469906, 1470629, 1477714,
              1478921, 1482170, 1483129, 1486817, 1487151, 1487331, 1487834, 1487901, 1488646, 1488960, 1489281,
              1489349, 1489410, 1489942, 1490902, 1490977, 1490986, 1491012, 1491083, 1491086, 1491249, 1491310,
              1491711, 1491810, 1491824, 1495728, 1495758, 1498153, 1499749, 1500234, 1500516, 1501146, 1501342,
              1501854, 1502895, 1504105, 1504991, 1505776, 1511023, 1511345, 1515431, 1515993, 1516605, 1517316,
              1518388, 1520391, 1523680, 1525094, 225980, 246589, 342288, 342906, 343526, 475180, 58747, 672148,
              78645]

for movie_id in movie_list:
    url = f'https://www.maoyan.com/films/{movie_id}'
    response = requests.get(url, headers=headers)
    # print(response.status_code)
    soup = BeautifulSoup(response.text, 'html.parser')
    print(soup)
    print(soup.find('li', class_='ellipsis'))

